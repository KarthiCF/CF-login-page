<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/84293646a5.js" crossorigin="anonymous"></script>
    
        
    <link rel="icon" href="image/cf_icon.png">
    <title>TO DO</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section class="ToDoMain" style="background: linear-gradient(to bottom,rgb(65, 65, 155) 0%, rgb(2, 2, 2) 100%); height: auto; width:100%">
     <div class="container-sm py-4 px-5">
        <h1 class="text-center text-white">TO DO</h1>
        <form class="todoForm row g-3  mt-2 mb-4 p-4 text-center" style="max-width: 480px; margin: auto;" id="ToDoform">          
            
            <div class="col mx-0">
              <input id="enterToDo" type="text" name="todo" class="form-control"  placeholder="Add new To do" required>
            </div>
            <div class="col-auto">
              <button class="btn btn-primary" id="addBtn">Add</button>
            </div>
            <div>
              <hr style="color: rgb(168, 168, 168); height: 2px; opacity: 100%;">
            </div>
           
            
           
              <!-- <p class=" todoList" id="tableToDo"></p> -->
              <table class="todoList table-bordered table-striped" id="tableToDo">
                <tr class="bg-white text-black">
                  
                </tr>
              </table>
              
            
        </form>

      </section>
   
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    
  </body>
  <script>
      var AddButton = document.getElementById('addBtn')
      var ToDo = document.getElementById('enterToDo')
      var ToDoList = document.getElementById('tableToDo')
      var ToDoform = document.getElementById('ToDoform')
      const getToDo = localStorage.getItem('ToDo')
      const ToDoArray = JSON.parse(getToDo) === null ? [] :  JSON.parse(getToDo)
      var checkBoxToDo = document.getElementById('checkBox');
    
  
      
      listLoop()
      
      
      AddButton.addEventListener("click", function(event){
          if(ToDo.value !== ''){
              event.preventDefault();
              event.stopPropagation();
              storeToDo();
              listLoop();
              window.location.reload();
              ToDoform.reset()                        
          }
          else{
              alert("not selected")
          };

      });

     
      
      function storeToDo(){
          var ToDo = document.getElementById('enterToDo')
          ToDoArray.push(ToDo.value);
          localStorage.setItem('ToDo',JSON.stringify(ToDoArray))
         
        };

      //----------- This function creates a new row when a new ToDO is added in the input field ----------------
      function listLoop(){                
        for (var l = 0; l < ToDoArray.length; l++){
          var row = `<td class="newlist text-black bg-white p-3 mt-1">${ToDoArray[l]}<span class="icon" ><i class="icon fas fa-trash-alt" onclick="deleteToDo(this)"></i></span></td>`
          
          ToDoList.innerHTML += row};                        
        };

        // --------- This function deletes the selected row content in table and local storage also ----------------
        function deleteToDo(obj){          
          var ToDoRowNumber = obj.parentNode.parentNode.parentNode.rowIndex; // var 'ToDoRowNumber' returns index of selected row
          
          //-----------To delete the selected todo, splice is used here --------
          ToDoArray.splice((ToDoRowNumber -1), 1);
          // ---------- The above line deletes the row, but doesn't delete in local storage. So to delete in local storage also, set the local storage value again with this above array ----------------
          localStorage.setItem('ToDo',JSON.stringify(ToDoArray))
          window.location.reload();
          
        };

      //   function check(){
      //      if(document.getElementById("checkBox").checked){
      //        console.log("checked")
      // }
      //   }
      
        
     
  </script>
  

</html>



