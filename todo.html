<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://kit.fontawesome.com/84293646a5.js" crossorigin="anonymous"></script>
    
        
    <link rel="icon" href="image/cf_icon.png">
    <title>TO DO</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <section class="ToDoMain" style="background: linear-gradient(to bottom,rgb(65, 65, 155) 0%, rgb(2, 2, 2) 100%); height: auto; width:100%">
     <div class="container-sm py-4 px-5">
        <h1 class="text-center text-white">TO DO</h1>
        <form class="todoForm row g-3  mt-2 mb-4 p-4 text-center" style="max-width: 480px; margin: auto;" id="ToDoform">          
            
            <div class="col mx-0">
              <input id="enterToDo" type="text" name="todo" class="form-control"  placeholder="Add new To do" required>
            </div>
            <div class="col-auto">
              <button class="btn btn-primary" id="addBtn">Add</button>
            </div>
            <div>
              <hr style="color: rgb(168, 168, 168); height: 2px; opacity: 100%;">
            </div>
           
            
            <div class="container">
              <p class=" todoList" id="dothis"></p>
              
            </div>
        </form>

      </section>
   
  
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

    
  </body>
  <script>
      var AddButton = document.getElementById('addBtn')
      var ToDo = document.getElementById('enterToDo')
      var ToDoList = document.getElementById('dothis')
      var ToDoform = document.getElementById('ToDoform')
      const getToDo = localStorage.getItem('ToDo')
      const ToDoArray = JSON.parse(getToDo)
      var checkBoxToDo = document.getElementById('checkBox');
      

      
      
      AddButton.addEventListener("click", function(event){
          if(ToDo.value !== ''){
              event.preventDefault();
              event.stopPropagation();
              storeToDo();
              window.location.reload()
              ToDoform.reset()                        
          }
          else{
              alert("not selected")
          };

          
          
      });

     
      
      function storeToDo(){
          var ToDo = document.getElementById('enterToDo')
          if(localStorage.getItem('ToDo') === null){
              localStorage.setItem('ToDo', '[]');
              window.location.reload()
          };
          
          ToDoArray.push(ToDo.value);
          localStorage.setItem('ToDo',JSON.stringify(ToDoArray))
         
        };

      listLoop()
      function listLoop(){
        for (var l = 0; l < ToDoArray.length; l++){
          var row = `<p class="newlist"><input class="checkBoxC" type="checkbox"  id="checkBox" >&nbsp${ToDoArray[l]}<span class="icon" ><i class="icon fas fa-trash-alt" onclick="deleteToDo(this)"></i></span></p>`
          ToDoList.innerHTML += row};     
          var newlist = document.querySelector('.newlist')
        };

        function deleteToDo(obj){
          var indexing = obj.parentNode.parentNode.rowIndex
          var newlist = document.querySelector('.newlist')
          newlist.remove()
          console.log(indexing)
          // let getLocalStorageData = localStorage.getItem("New Todo");
          // // listArray = JSON.parse(getLocalStorageData);
          // ToDoArray.splice(index, 1); //delete or remove the li
          // localStorage.setItem("New Todo", JSON.stringify(ToDoArray));
          // storeToDo() //call the showTasks function

        }
        function check(){
           if(document.getElementById("checkBox").checked){
             console.log("checked")
      }
        }
      
        
     
  </script>
</html>
